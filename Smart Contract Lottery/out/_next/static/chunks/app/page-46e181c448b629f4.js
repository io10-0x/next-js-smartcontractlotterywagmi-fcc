(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{91339:function(e,t,n){Promise.resolve().then(n.bind(n,69141))},69141:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var a=n(57437),s=n(2265),i=n(83325),r=n(24934),u=n(74703),o=()=>{(0,i.m)();let{connectors:e,connect:t,status:n,error:s}=(0,r.$)(),{disconnect:o}=(0,u.q)();return(0,a.jsxs)("div",{className:"border-b-8 flex items-center",children:[(0,a.jsx)("h1",{className:"font-bold text-3xl flex-grow",children:"Decentralised Lottery"}),(0,a.jsx)("div",{className:"flex justify-end",children:e.map(e=>(0,a.jsx)("button",{className:"bg-blue-500 text-black font-bold py-2 px-4 rounded ml-2",onClick:()=>t({connector:e}),type:"button",children:e.name},e.uid))}),(0,a.jsx)("div",{children:null==s?void 0:s.message})]})},c=n(64379),p=n.n(c),d=()=>{let e=[1,11155111,1337],t=(0,i.m)(),{connectors:n,connect:o,status:c,error:d}=(0,r.$)(),{disconnect:l}=(0,u.q)();return(0,s.useEffect)(()=>{t.chainId&&(console.log("Detected chain ID change:",t.chainId),e.includes(t.chainId)?p().fire({text:"Compatible Chain",icon:"success"}):p().fire({text:"Please select a valid chain (Ethereum, Sepolia, or HH Local)",icon:"warning"}))},[t.chainId]),(0,a.jsxs)("div",{className:"border-b-8",children:[(0,a.jsx)("h2",{className:"font-bold text-3xl",children:"Account"}),(0,a.jsxs)("div",{children:["status: ",t.status,(0,a.jsx)("br",{}),"addresses: ",JSON.stringify(t.addresses),(0,a.jsx)("br",{}),"chainId: ",t.chainId]}),"connected"===t.status&&(0,a.jsx)("button",{className:"bg-blue-500 text-black font-bold py-2 px-4 rounded",type:"button",onClick:()=>l(),children:"Disconnect"})]})},l=n(78574),y=[{type:"constructor",stateMutability:"undefined",payable:!1,inputs:[{type:"uint256",name:"entrancefee"},{type:"address",name:"linktokenaddress"},{type:"address",name:"v2WrapperAddress"}]},{type:"error",name:"Raffle__LotteryNotOpen",inputs:[]},{type:"error",name:"Raffle__NotEnoughETH",inputs:[]},{type:"error",name:"Raffle__TransferFailed",inputs:[]},{type:"error",name:"Raffle__UpkeepNotNeeded",inputs:[]},{type:"event",anonymous:!1,name:"Lotteryenter",inputs:[{type:"address",name:"playeraddress",indexed:!0}]},{type:"event",anonymous:!1,name:"OwnershipTransferRequested",inputs:[{type:"address",name:"from",indexed:!0},{type:"address",name:"to",indexed:!0}]},{type:"event",anonymous:!1,name:"OwnershipTransferred",inputs:[{type:"address",name:"from",indexed:!0},{type:"address",name:"to",indexed:!0}]},{type:"event",anonymous:!1,name:"RequestFulfilled",inputs:[{type:"uint256",name:"requestId",indexed:!1},{type:"uint256[]",name:"randomWords"},{type:"uint256",name:"payment",indexed:!1}]},{type:"event",anonymous:!1,name:"RequestSent",inputs:[{type:"uint256",name:"requestId",indexed:!1},{type:"uint32",name:"numWords",indexed:!1}]},{type:"event",anonymous:!1,name:"WinnerPicked",inputs:[{type:"address",name:"winner",indexed:!0}]},{type:"function",name:"acceptOwnership",constant:!1,payable:!1,inputs:[],outputs:[]},{type:"function",name:"checkUpkeep",constant:!0,stateMutability:"view",payable:!1,inputs:[{type:"bytes",name:"checkData"}],outputs:[{type:"bool",name:"upkeepNeeded"},{type:"bytes",name:""}]},{type:"function",name:"enterlottery",constant:!1,stateMutability:"payable",payable:!0,inputs:[],outputs:[]},{type:"function",name:"getNumWords",constant:!0,stateMutability:"pure",payable:!1,inputs:[],outputs:[{type:"uint256",name:"numwords"}]},{type:"function",name:"getcallbackgaslimit",constant:!0,stateMutability:"pure",payable:!1,inputs:[],outputs:[{type:"uint256",name:"gaslimit"}]},{type:"function",name:"getentrancefee",constant:!0,stateMutability:"view",payable:!1,inputs:[],outputs:[{type:"uint256",name:""}]},{type:"function",name:"getinterval",constant:!0,stateMutability:"pure",payable:!1,inputs:[],outputs:[{type:"uint256",name:"interval"}]},{type:"function",name:"getlatestblocktimestamp",constant:!0,stateMutability:"view",payable:!1,inputs:[],outputs:[{type:"uint256",name:""}]},{type:"function",name:"getlotterystate",constant:!0,stateMutability:"view",payable:!1,inputs:[],outputs:[{type:"uint8",name:""}]},{type:"function",name:"getnumplayers",constant:!0,stateMutability:"view",payable:!1,inputs:[],outputs:[{type:"uint256",name:""}]},{type:"function",name:"getwinner",constant:!0,stateMutability:"view",payable:!1,inputs:[],outputs:[{type:"address",name:""}]},{type:"function",name:"lastRequestId",constant:!0,stateMutability:"view",payable:!1,inputs:[],outputs:[{type:"uint256",name:""}]},{type:"function",name:"owner",constant:!0,stateMutability:"view",payable:!1,inputs:[],outputs:[{type:"address",name:""}]},{type:"function",name:"performUpkeep",constant:!1,payable:!1,inputs:[{type:"bytes",name:"performData"}],outputs:[]},{type:"function",name:"rawFulfillRandomWords",constant:!1,payable:!1,inputs:[{type:"uint256",name:"_requestId"},{type:"uint256[]",name:"_randomWords"}],outputs:[]},{type:"function",name:"requestIds",constant:!0,stateMutability:"view",payable:!1,inputs:[{type:"uint256",name:""}],outputs:[{type:"uint256",name:""}]},{type:"function",name:"s_requests",constant:!0,stateMutability:"view",payable:!1,inputs:[{type:"uint256",name:""}],outputs:[{type:"uint256",name:"paid"},{type:"bool",name:"fulfilled"}]},{type:"function",name:"transferOwnership",constant:!1,payable:!1,inputs:[{type:"address",name:"to"}],outputs:[]}],m="0x0165878A594ca255338adfa4d48449f69242Eb8F",f=n(19704),b=n(62536),h=n(26422),x=n(69532),v=n(94106),w=n(78928),g=n(6007);let N=async()=>{let[e]=await window.ethereum.request({method:"eth_requestAccounts"});return e};var j=()=>{let{writeContract:e}=(0,l.S)(),[t,n]=(0,s.useState)("0.0"),[i,r]=(0,s.useState)("0.0"),[u,o]=(0,s.useState)("0.0"),[c,d]=(0,s.useState)(!1),[j,k]=(0,s.useState)(!1);(0,w.i)();let _=(0,f.v)({chain:v.z,transport:(0,b.d)()});async function E(){async function e(){try{let e=await _.readContract({address:m,abi:y,functionName:"getnumplayers"});r(e.toString())}catch(e){console.error("Error fetching entrance fee:",e)}}async function t(){try{let e=await _.readContract({address:m,abi:y,functionName:"getwinner"});o(e)}catch(e){console.error("Error fetching entrance fee:",e)}}(async function(){try{let e=await _.readContract({address:m,abi:y,functionName:"getentrancefee"});n(e.toString())}catch(e){console.error("Error fetching entrance fee:",e)}})(),e(),t()}async function M(e){let n=await e.writeContract({abi:y,address:m,functionName:"enterlottery",args:[],value:BigInt(t)});console.log(n);let a=await _.waitForTransactionReceipt({hash:n});console.log(a),"success"==a.status&&d(!0)&&E()}E(),(0,s.useEffect)(()=>{_.watchContractEvent({address:m,abi:y,eventName:"WinnerPicked",onLogs:e=>{E(),console.log(e)}})},[]),(0,s.useEffect)(()=>{c&&p().fire({text:"Lottery entered successfully",icon:"success"}),d(!1)},[c]);let q=(0,g.D)({mutationFn:e=>M(e)});return(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{className:"bg-blue-500 text-black font-bold py-2 px-4 rounded",onClick:()=>N().then(e=>{let t=(0,h.K)({account:e,chain:v.z,transport:(0,x.P)(window.ethereum)});q.mutate(t)}),children:q.isPending?(0,a.jsx)("div",{className:"spinner border-t-transparent border-solid border-black border-4 rounded-full w-4 h-4 animate-spin mr-2"}):(0,a.jsx)("div",{children:"Enter Lottery"})}),(0,a.jsxs)("p",{children:["Entrance Fee: ",t]}),(0,a.jsxs)("p",{children:["Number Of Players: ",i]}),(0,a.jsxs)("p",{children:["Winner: ",u]})]})},k=function(){return(0,a.jsxs)("div",{children:[(0,a.jsx)(o,{}),(0,a.jsx)(d,{}),(0,a.jsx)(j,{})]})}},94106:function(e,t,n){"use strict";n.d(t,{z:function(){return a}});let a=(0,n(95258).a)({id:1337,name:"HH Local",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["http://127.0.0.1:8545/"]}}})},78928:function(e,t,n){"use strict";n.d(t,{i:function(){return l}});var a=n(84925),s=n(89566),i=n(75332),r=n(62536),u=n(16491),o=n(8483),c=n(36536),p=n(8923),d=n(94106);function l(){return(0,a._)({chains:[u.R,o.F,d.z],connectors:[(0,c.L)(),(0,p.D)()],storage:(0,s.o)({storage:i.Dr}),ssr:!0,transports:{[u.R.id]:(0,r.d)(),[o.F.id]:(0,r.d)(),[d.z.id]:(0,r.d)("http://127.0.0.1:8545/")}})}}},function(e){e.O(0,[461,729,929,971,23,744],function(){return e(e.s=91339)}),_N_E=e.O()}]);